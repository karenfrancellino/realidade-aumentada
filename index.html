<!DOCTYPE html> 
<!-- Define que este documento Ã© HTML5 -->

<html>
  <head>
    <!-- Ãrea de configuraÃ§Ãµes e importaÃ§Ãµes do projeto -->

    <meta charset="utf-8">
    <!-- Define a codificaÃ§Ã£o de caracteres como UTF-8 
         â†’ permite acentos, emojis e caracteres especiais sem problemas -->

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <!-- Ajusta a tela em dispositivos mÃ³veis
         width=device-width â†’ largura da tela do dispositivo
         initial-scale=1.0 â†’ zoom inicial
         user-scalable=no â†’ impede o zoom manual do usuÃ¡rio -->

    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Permite que a pÃ¡gina funcione como "app" em iPhones -->

    <meta name="mobile-web-app-capable" content="yes">
    <!-- Permite que a pÃ¡gina funcione como "app" em Android -->

    <!-- Importa A-Frame (biblioteca 3D) -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

    <!-- Importa AR.js (Realidade Aumentada) -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <!-- Importa biblioteca para screenshot-->
    <script src="https://cdn.webrtc-experiment.com/RecordRTC.js"></script>
    
  </head> 
  <body style="margin:0; overflow:hidden;">
    <!-- margin:0 remove margens da pÃ¡gina
         overflow:hidden remove barras de rolagem para cÃ¢mera ocupar toda a tela -->

    <!-- Cena 3D + AR.js -->
     <!-- Deixa a cena embutida na pÃ¡gina, sem VR completo -->
    <!-- Define que a fonte de vÃ­deo Ã© a webcam -->
    <a-scene 
      embedded                     
      arjs="sourceType: webcam;     
           debugUIEnabled: false;"> <!-- Remove os botÃµes de debug da AR -->

      <!-- Marcador Hiro -->
      <!-- Tudo que estiver dentro aparece quando o marcador Hiro Ã© detectado -->
      <a-marker preset="hiro">

        <!-- Entidade do personagem 3D -->
        <!-- ID para referenciar o modelo no script -->
         <!-- Ajusta o tamanho do modelo -->
        <!-- PosiÃ§Ã£o relativa ao marcador -->
        <a-entity 
          id="personagem"  
          gltf-model="https://raw.githubusercontent.com/KarenFrancellino/ar-models/main/DROYZ_ANIMAPP_SiCkJacken_v005.glb"
          scale="2 2 2"  
          position="0 0.5 0" 
          animation-mixer> <!-- Ativa o sistema de animaÃ§Ã£o do GLB -->
        </a-entity>

      </a-marker>

      <!-- CÃ¢mera -->
      <a-entity camera></a-entity>

      <!-- Tirar screenshot-->
      </a-scene> <button id="screenshotButton" style="position: absolute; bottom: 10px; left: 10px; z-index: 999; padding: 10px;">
      ðŸ“¸ Screenshot
      </button> 
    <!-- GravaÃ§ao de tela-->
    <button id="recordButton" style="position: absolute; bottom: 10px; right: 10px; z-index: 999; padding: 10px;"> 
      ðŸ”´ Iniciar GravaÃ§Ã£o 
    </button>
  
    <!-- Script para descobrir animaÃ§Ãµes e tocar a primeira -->
    <script>
      // Seleciona a entidade do modelo pelo ID
      const entity = document.querySelector('#personagem');

      // Espera o modelo carregar totalmente
      entity.addEventListener('model-loaded', (e) => {
        const model = e.detail.model;       // Objeto 3D carregado
        const animations = model.animations; // Lista de animaÃ§Ãµes disponÃ­veis

        // Mostra no console todos os nomes das animaÃ§Ãµes
        console.log('AnimaÃ§Ãµes disponÃ­veis:', animations.map(a => a.name));

        // Se houver animaÃ§Ãµes, toca automaticamente a primeira
        if (animations.length > 0) {
          entity.setAttribute('animation-mixer', {
            clip: 'SickJacken_rigAction',  // Nome da animaÃ§Ã£o a tocar
            loop: 'repeat'             // Faz a animaÃ§Ã£o repetir infinitamente
          });
        } else {
          console.warn('Nenhuma animaÃ§Ã£o encontrada no modelo.');
        }
      });
    </script>

  </body>
</html>
